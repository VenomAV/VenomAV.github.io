

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.54.0">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>There and Back Again</title>
    <meta name="author" content="Andrea Vallotti">
    <meta name="keywords" content="functional programming, F#, development, dot-net, agile, cloud, azure, developers">

    <link rel="icon" href="http://www.andreavallotti.tech/images/favicon.png">
    

    
    <meta name="description" content="For those who loves Tolkien, the title could seem uppish. After all, I traveled 7.600 km, much more than Bilbo and fellowship, I met people I could hardly understand, and I talked to a dragon&hellip; Ok, the latter is not true, but let me believe so ðŸ˜ƒ
Jokes aside, I spent the first six months of this year in Indianapolis, USA. In this period, I had the chance to appreciate how lively Indiana&rsquo;s tech community is.">
    <meta property="og:description" content="For those who loves Tolkien, the title could seem uppish. After all, I traveled 7.600 km, much more than Bilbo and fellowship, I met people I could hardly understand, and I talked to a dragon&hellip; Ok, the latter is not true, but let me believe so ðŸ˜ƒ
Jokes aside, I spent the first six months of this year in Indianapolis, USA. In this period, I had the chance to appreciate how lively Indiana&rsquo;s tech community is.">
    <meta property="og:type" content="article">
    <meta property="og:title" content="There and Back Again">
    <meta property="og:url" content="http://www.andreavallotti.tech/en/2017/09/there-and-back-again/">
    <meta property="og:site_name" content="Development: people, code &amp; me">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="For those who loves Tolkien, the title could seem uppish. After all, I traveled 7.600 km, much more than Bilbo and fellowship, I met people I could hardly understand, and I talked to a dragon&hellip; Ok, the latter is not true, but let me believe so ðŸ˜ƒ
Jokes aside, I spent the first six months of this year in Indianapolis, USA. In this period, I had the chance to appreciate how lively Indiana&rsquo;s tech community is.">
    
      <meta name="twitter:creator" content="@AndreaVallotti">
    
    
      <meta property="fb:app_id" content="170534096895468">
    

    
    

    
      <meta property="og:image" content="https://res.cloudinary.com/andreavallotti/image/upload/blog/images/there-and-back-again/There_And_Back_Again.jpg">
    

    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="http://www.andreavallotti.tech/css/style-u6mk0ojoywresbx8iepslrmmhl4stuhrsxuwhkpwrkrx7mryjcaimasnk4pi.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-105324949-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="http://www.andreavallotti.tech/en/">Development: people, code &amp; me</a>
  </div>
  
    
      <a class="header-right-picture "
         href="http://www.andreavallotti.tech/#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/100b4dd001736bba121c252821f9c063?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="http://www.andreavallotti.tech/#about">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/100b4dd001736bba121c252821f9c063?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Andrea Vallotti</h4>
        
          <h5 class="sidebar-profile-bio">Software enthusiast: architect, developer, and technology scout. Agile addicted. MCSD - App Builder, MCSA - Cloud Platform, CSM, and CSPO. Enjoy in constantly growing while crafting <em>awesome software</em>, and helping others doing the same. <a href="http://www.andreavallotti.tech/en/page/about">More.</a></h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://www.andreavallotti.tech/en/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://www.andreavallotti.tech/en/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://www.andreavallotti.tech/en/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://www.andreavallotti.tech/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://www.andreavallotti.tech/en/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/andrea-vallotti-b379313/" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">LinkedIn</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/AndreaVallotti" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://www.andreavallotti.tech/en/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://www.andreavallotti.tech/it/">
    
      <i class="sidebar-button-icon fa fa-lg fa-language"></i>
      
      <span class="sidebar-button-desc">Italiano</span>
    </a>
  </li>

    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              post-header-cover--partial"
       style="background-image:url('https://res.cloudinary.com/andreavallotti/image/upload/blog/images/there-and-back-again/There_And_Back_Again.jpg')"
       data-behavior="4">
    
      <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      There and Back Again
    </h1>
  
  <div class="postShorten-meta post-meta">
  
    <time itemprop="datePublished" datetime="2017-09-04T00:00:00Z">
      
  
  
  
  
    4 September 2017
  

    </time>
  
  
  
  
    <span>in</span>
    
      <a class="category-link" href="http://www.andreavallotti.tech/en/categories/development">Development</a>
    
  


</div>

</div>
    
  </div>


      <div id="main" data-behavior="4"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              

<p>For those who loves Tolkien, the title could seem uppish. After all, I traveled
7.600 km, much more than Bilbo and fellowship, I met people I could hardly understand,
and I talked to a dragon&hellip; Ok, the latter is not true, but let me believe so ðŸ˜ƒ</p>

<p>Jokes aside, I spent the first six months of this year in Indianapolis, USA. In this
period, I had the chance to appreciate how lively Indiana&rsquo;s tech community is. I
attended two conferences, <a href="https://indycode.amegala.com/">Indy.Code</a> and
<a href="http://agileindy.org/conference/">AgileIndy conference</a>, and several meetups:
<a href="https://www.meetup.com/agileindy/">Agileindy</a>, <a href="https://www.meetup.com/indysa/">Indy Software Artisans</a>,
<a href="https://www.meetup.com/Agile-Games/">Agile Games</a>, <a href="https://www.meetup.com/Indy-NET-Consortium/">Indy .NET Consortium</a>,
etc.</p>

<p><a href="https://en.wikipedia.org/wiki/Functional_programming">Functional programming</a> is
one of the topics that mostly caught my attention. For three main reasons: the
approach I&rsquo;ve never really deepen; the potential of this paradigm; and the passion
conveyed by <a href="https://davefancher.com/">Dave Fancher</a>.</p>

<p>One of the most interesting feature of functional programming (FP) is surely the
immutability of the &ldquo;variables&rdquo; (it would be more correct call them &ldquo;immutable&rdquo;),
and how it leads to a different structure of source code w.r.t. object
oriented programming (OOP).</p>

<p>In order to highlight the differences between those two approaches on this specific
aspect, I had implemented the same application twice: first using C# (OOP) and
then using F# (FP). The application simply had to:</p>

<ul>
<li>read a bank account from a database, given the owner&rsquo;s name;</li>
<li>allow the user to input an amount to withdraw and show the new balance;</li>
<li>ask confirmation to the user, and save the new balance on the DB only in case of
affirmative answer;</li>
<li>cycle the above operations.</li>
</ul>

<p>The complete examples&rsquo; source code is available on <a href="https://github.com/VenomAV/OOPComparedToFP.git">GitHub</a>.</p>

<h2 id="c">C#</h2>

<p>First of all I defined the model of the bank account.
<!--"http://underscorejs.org/#compact" "BankAccount.cs"-->

  
    
  
  
    
  
  
  


<figure class="highlight cs">
  <figcaption>
    
      <span>BankAccount.cs</span>
    
  </figcaption>
  <table>
    <tbody>
      <tr>
        <td class="gutter">
          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre>
        </td>
        <td class="code">
          <pre class="cs code-highlight">public class BankAccount
{
    public BankAccount()
    {
    }

    public BankAccount(string owner, decimal balance)
    {
        Owner = owner;
        Balance = balance;
    }

    public int Id { get; private set; }
    public string Owner { get; private set; }
    public decimal Balance { get; private set; }

    public void Withdraw(decimal amount)
    {
        Balance -= amount;
    }
}</pre>
        </td>
      </tr>
    </tbody>
  </table>
</figure>
The class is really simple. The <code>Id</code> property is useful just to work with Entity
Framework for database persistence. I will just skip all the EF-related code since
it is not significant for the sake of this post.</p>

<p>After that I developed the application which satisfies the requirements above.

  
    
  
  
    
  
  
  


<figure class="highlight cs">
  <figcaption>
    
      <span>Program.cs</span>
    
  </figcaption>
  <table>
    <tbody>
      <tr>
        <td class="gutter">
          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre>
        </td>
        <td class="code">
          <pre class="cs code-highlight">using System;
using System.Linq;

class Program
{
    static void Main(string[] args)
    {
        using (BankAccountContext context = new BankAccountContext())
        {
            while (TryWithdrawFromAccount(context)) ;
        }
    }

    private static bool TryWithdrawFromAccount(BankAccountContext context)
    {
        string owner;
        BankAccount bankAccount;

        Console.Write(&#34;Type owner (or &#39;q&#39; to exit): &#34;);
        owner = Console.ReadLine();
        if (owner == &#34;q&#34;)
        {
            return false;
        }
        bankAccount = context.BanckAccounts.FirstOrDefault(ba =&gt; ba.Owner == owner);
        if (bankAccount != null)
        {
            WithdrawFromAccount(context, bankAccount);
        }
        return true;
    }

    private static void WithdrawFromAccount(BankAccountContext context,
        BankAccount bankAccount)
    {
        Console.WriteLine($&#34;{bankAccount.Owner} has {bankAccount.Balance}$&#34;);

        Console.Write(&#34;How much you want to withdraw? &#34;);
        bankAccount.Withdraw(decimal.Parse(Console.ReadLine()));

        if (ConfirmWithdraw(bankAccount) == &#34;y&#34;)
        {
            context.SaveChanges();
        }
    }

    private static string ConfirmWithdraw(BankAccount bankAccount)
    {
        Console.Write($&#34;{bankAccount.Owner} new balance will be &#34; &#43;
            $&#34;{bankAccount.Balance}. Confirm operation? [y/n] &#34;);
        return Console.ReadLine();
    }
}</pre>
        </td>
      </tr>
    </tbody>
  </table>
</figure>
The <code>Main</code> method just instantiate the EF context, while all the application logic
is implemented in <code>TryWithdrawFromAccount</code> and <code>WithdrawFromAccount</code>.
The application&rsquo;s most important parts are:</p>

<ul>
<li>the loading of bank account at line  <em>25</em>;</li>
<li>the withdraw of the required amount at line <em>39</em>;</li>
<li>and the confirmation request with the persistence of the account at lines <em>41-44</em>.</li>
</ul>

<p>Coding was easy. When running the application, everything works fine if the user
confirms the withdraw. On the other hand, if the user doesn&rsquo;t confirm the withdraw
and ask again the balance of the same account, the application behaves as shown below.</p>

<p><img src="https://res.cloudinary.com/andreavallotti/image/upload/blog/images/there-and-back-again/BankAccountCSharp.png" alt="Console screenshot" title="Esecuzione del programma C#" /></p>

<p>The error stands out for those who usually works with EF: even if the new balance
is persisted only if the user confirms, line <em>41</em>, the instance <code>bankAccount</code> has
been already modified and it belongs to the EF context which is disposed only when
the application is closed. That&rsquo;s why the second time the user asks for the Alice&rsquo;s
balance, the displayed value is modified and not the original as one could expect.</p>

<p>With few changes, shown below, the application behaves in the expected way.

  
    
  
  
    
  
  
  


<figure class="highlight cs">
  <figcaption>
    
      <span>Program.cs</span>
    
  </figcaption>
  <table>
    <tbody>
      <tr>
        <td class="gutter">
          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre>
        </td>
        <td class="code">
          <pre class="cs code-highlight">private static bool TryWithdrawFromAccount(BankAccountContext context)
{
    string owner;
    BankAccount bankAccount;

    Console.Write(&#34;Type owner (or &#39;q&#39; to exit): &#34;);
    owner = Console.ReadLine();
    if (owner == &#34;q&#34;)
    {
        return false;
    }
    bankAccount = TryGetBankAccountByOwner(context, owner);
    if (bankAccount != null)
    {
        WithdrawFromAccount(context, bankAccount);
    }
    return true;
}

private static void WithdrawFromAccount(BankAccountContext context,
    BankAccount bankAccount)
{
    Console.WriteLine($&#34;{bankAccount.Owner} has {bankAccount.Balance}$&#34;);

    Console.Write(&#34;How much you want to withdraw? &#34;);
    bankAccount.Withdraw(decimal.Parse(Console.ReadLine()));

    if (ConfirmWithdraw(bankAccount) == &#34;y&#34;)
    {
        UpdateBankAccount(context, bankAccount);
    }
}

private static BankAccount TryGetBankAccountByOwner(BankAccountContext context,
    string owner)
{
    /*** Load detached object ***/
    return context.BanckAccounts.AsNoTracking()
        .FirstOrDefault(ba =&gt; ba.Owner == owner);
}

private static void UpdateBankAccount(BankAccountContext context, 
    BankAccount bankAccount)
{
    /*** Attach the modified object to the context ***/
    context.Entry(bankAccount).State = System.Data.Entity.EntityState.Modified;
    context.SaveChanges();
}</pre>
        </td>
      </tr>
    </tbody>
  </table>
</figure>
In order to work with the domain object without polluting the EF context the bank
account has been detached from the context (method <code>AsNoTracking</code> at line <em>38</em>),
and attached back just after the user confirmation (line <em>46</em>).</p>

<p>Now let see how the application can be implemented in F#.</p>

<h2 id="f">F#</h2>

<p>Also in this case I immediately defined the domain model. It consists of a <a href="https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/records">record</a>
and a <code>withdraw</code> function which, following the immutability principle, creates a
copy of the original record with the new balance.

  
    
  
  
    
  
  
  


<figure class="highlight fsharp">
  <figcaption>
    
      <span>BankAccount.fs</span>
    
  </figcaption>
  <table>
    <tbody>
      <tr>
        <td class="gutter">
          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
        </td>
        <td class="code">
          <pre class="fsharp code-highlight">module BankAccount

type BankAccount = {Id:int; Owner:string; Balance:decimal}

let withdraw = fun bankAccount (amount:decimal) -&gt;
  ({ bankAccount with Balance = bankAccount.Balance - amount })</pre>
        </td>
      </tr>
    </tbody>
  </table>
</figure></p>

<p>After that I implemented the data access functions which, relying on the F# Data
Provider for SQL Server, and the same database used for the C# example, simply
map the <code>BankAccount</code> record with the DB fields.

  
    
  
  
    
  
  
  


<figure class="highlight fsharp">
  <figcaption>
    
      <span>DataAccess.fs</span>
    
  </figcaption>
  <table>
    <tbody>
      <tr>
        <td class="gutter">
          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre>
        </td>
        <td class="code">
          <pre class="fsharp code-highlight">module DataAccess

open Microsoft.FSharp.Data.TypeProviders
open BankAccount

[&lt;Literal&gt;]
let connectionString = &#34;Data Source=(localdb)\mssqllocaldb;Initial Catalog=BankAccounts;Integrated Security=True&#34;

type dbSchema = SqlDataConnection&lt;connectionString&gt;

let tryGetBankAccountByOwner =
  fun (db:dbSchema.ServiceTypes.SimpleDataContextTypes.BankAccounts) owner -&gt;
    (query { for ba in db.BankAccounts1 do
             where (ba.Owner = owner);
             select {
               Id = ba.Id;
               Owner = ba.Owner;
               Balance = ba.Balance
             }
           } |&gt; Seq.tryHead)

let updateBankAccount =
  fun (db:dbSchema.ServiceTypes.SimpleDataContextTypes.BankAccounts) bankAccount -&gt;
    (query { for ba in db.BankAccounts1 do
             where (ba.Id = bankAccount.Id);
             select ba
           } |&gt; Seq.iter(fun ba -&gt;
                             ba.Owner &lt;- bankAccount.Owner;
                             ba.Balance &lt;- bankAccount.Balance)
     db.DataContext.SubmitChanges())</pre>
        </td>
      </tr>
    </tbody>
  </table>
</figure>
It is worth noting that, with this approach, the application code is naturally detached
from the database.</p>

<p>Finally, I created a console application which is really similar to the C# one.

  
    
  
  
    
  
  
  


<figure class="highlight fsharp">
  <figcaption>
    
      <span>Program.fs</span>
    
  </figcaption>
  <table>
    <tbody>
      <tr>
        <td class="gutter">
          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre>
        </td>
        <td class="code">
          <pre class="fsharp code-highlight">module Program

open System
open BankAccount
open DataAccess

let printConfirmWithdraw = fun bankAccount -&gt;
  printf &#34;%s new balance will be %M. Confirm operation? [y/n] &#34;
    bankAccount.Owner bankAccount.Balance

let confirmWithdraw =
  fun bankAccount amount -&gt; amount |&gt; withdraw bankAccount |&gt; printConfirmWithdraw
                            Console.ReadLine()

let withdrawFromAccount = fun db bankAccount -&gt;
  (printfn &#34;%s has %M$&#34; bankAccount.Owner bankAccount.Balance
   printf &#34;How much you want to withdraw? &#34;
   let amount = Console.ReadLine() |&gt; decimal
   match confirmWithdraw bankAccount amount with
     | &#34;y&#34; -&gt; amount |&gt; withdraw bankAccount |&gt; updateBankAccount db
     | _ -&gt; ())

let tryWithdrawFromAccount = fun db -&gt;
  printf &#34;Type owner (or &#39;q&#39; to exit): &#34;
  match Console.ReadLine() with
    | &#34;q&#34; -&gt; false
    | owner -&gt; (match tryGetBankAccountByOwner db owner with
                  | None -&gt; ()
                  | Some bankAccount -&gt; withdrawFromAccount db bankAccount
                true)

[&lt;EntryPoint&gt;]
let main argv =
  let db = dbSchema.GetDataContext()
  while tryWithdrawFromAccount(db) do ()
  0</pre>
        </td>
      </tr>
    </tbody>
  </table>
</figure>
Like before the <code>main</code> function manages the DB connection (line <em>34</em>) and the application
logic is entirely implemented in the <code>tryWithdrawFromAccount</code> and <code>withdrawFromAccount</code>
functions.
The application&rsquo;s most important parts are:</p>

<ul>
<li>the loading of bank account at line  <em>27</em>;</li>
<li>the withdraw of the required amount at line <em>20</em>;</li>
<li>and the confirmation request with the persistence of the account at lines <em>20</em>.</li>
</ul>

<p>In this case, everything works. On the other hand, coding was harder just because
I am more used to OOP.</p>

<h2 id="conclusions">Conclusions</h2>

<p>Developing this simple application, the immutability naturally helps me to clearly
define the seams between read/write of the data and the elaboration of those data.
As I pointed out with the C# samples, the same level of separation can be achieved
also with OOP.</p>

<p>The main difference between the two approaches is that in order to write good code
with the OOP paradigm you have to be disciplined, while in order to write ugly code
with the functional paradigm you have to be fairly undisciplined ðŸ˜ƒ
On the other hand, the object oriented programming is probably more intuitive w.r.t.
the FP which is basically more formal.</p>

<p>There are several other features which are debated between FP and OOP: source code
readability, source code verbosity, performance, etc. If I will experiment more on
these aspects, I will share the results.</p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="http://www.andreavallotti.tech/en/tags/functional-programming/">functional programming</a>

  <a class="tag tag--primary tag--small" href="http://www.andreavallotti.tech/en/tags/f/">F#</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="http://www.andreavallotti.tech/en/2017/10/using-ef-cores-migration-with-docker-and-mysql/" data-tooltip="Using EF Core&#39;s migration with Docker and MySQL">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="http://www.andreavallotti.tech/en/2017/08/console.writeline-hello-world/" data-tooltip="Console.WriteLine( &#34;Hello, World!&#34; );">
          
            <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http%3a%2f%2fwww.andreavallotti.tech%2fen%2f2017%2f09%2fthere-and-back-again%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fwww.andreavallotti.tech%2fen%2f2017%2f09%2fthere-and-back-again%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http%3a%2f%2fwww.andreavallotti.tech%2fen%2f2017%2f09%2fthere-and-back-again%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 Andrea Vallotti. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="http://www.andreavallotti.tech/en/2017/10/using-ef-cores-migration-with-docker-and-mysql/" data-tooltip="Using EF Core&#39;s migration with Docker and MySQL">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="http://www.andreavallotti.tech/en/2017/08/console.writeline-hello-world/" data-tooltip="Console.WriteLine( &#34;Hello, World!&#34; );">
          
            <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http%3a%2f%2fwww.andreavallotti.tech%2fen%2f2017%2f09%2fthere-and-back-again%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fwww.andreavallotti.tech%2fen%2f2017%2f09%2fthere-and-back-again%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http%3a%2f%2fwww.andreavallotti.tech%2fen%2f2017%2f09%2fthere-and-back-again%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http%3a%2f%2fwww.andreavallotti.tech%2fen%2f2017%2f09%2fthere-and-back-again%2f">
        <i class="fa fa-google-plus"></i><span>Share on Google Plus</span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fwww.andreavallotti.tech%2fen%2f2017%2f09%2fthere-and-back-again%2f">
        <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http%3a%2f%2fwww.andreavallotti.tech%2fen%2f2017%2f09%2fthere-and-back-again%2f">
        <i class="fa fa-twitter"></i><span>Share on Twitter</span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/100b4dd001736bba121c252821f9c063?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Andrea Vallotti</h4>
    
      <div id="about-card-bio">Software enthusiast: architect, developer, and technology scout. Agile addicted. MCSD - App Builder, MCSA - Cloud Platform, CSM, and CSPO. Enjoy in constantly growing while crafting <em>awesome software</em>, and helping others doing the same. <a href="http://www.andreavallotti.tech/en/page/about">More.</a></div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Software Adventurer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Italy
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://www.andreavallotti.tech/en/2018/08/modeling-and-separation-of-concerns-in-functional-programming/">
                <h3 class="media-heading">Modeling and separation of concerns in functional programming</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">After my first experiment with functional programming, I decided to further study it in depth. Therefore, last March I attended &ldquo;Lean and Functional Domain Modelling&rdquo; workshop, organized by Avanscoperta, and held by Marcello Duarte. The workshop gave me good hints about functional modeling and fueled my curiosity to learn Scala and experiment more this paradigm.
In order to tackle this challenge I studied and practiced a lot. After some months, and several discussions with Matteo Baglini, I have been able to put together the puzzle, and I wrote this post.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://www.andreavallotti.tech/en/2018/01/coderetreat-florence/">
                <h3 class="media-heading">Coderetreat Florence</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">&ldquo;What matters is the journey&rdquo; (cit. Stefano Leli). This is the essence of Coderetreat.
I discovered this format during Urbino&rsquo;s Italian Agile Day 2017. During that event, I enjoyed practicing Test Driven Development (TDD) with other participants, and learning from the facilitators Matteo Vaccari, Stefano Leli and Gabriele Tondi. I liked the format so much that I decided to propose it in Florence, where I live, in order to let developers of my community to enjoy it and have fun together.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://www.andreavallotti.tech/en/2018/01/event-sourcing-and-cqrs-in-c/">
                <h3 class="media-heading">Event Sourcing and CQRS in C#</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">As promised in my previous post, in this article I examine practical aspects related to DDD and, in particular to CQRS and Event Sourcing patterns.
The main goal of my experiment is to implement an aggregate according to the Event Sourcing paradigm, and to create a separate read model to feed the pages of a Web application.
Before presenting the example, I am going to briefly introduce the main architectural patterns that have been used since DDD launch.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://www.andreavallotti.tech/en/2017/11/strategic-domain-driven-design/">
                <h3 class="media-heading">Strategic Domain-Driven Design</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I was inspired to such an extent by Evans&rsquo; Blue Book, that I got passionate about Domain-Driven Design. I was still in the United States when, four months in advance, I registered to the Strategic Domain-Driven Design workshop held by Alberto Brandolini (aka ziobrando) and organized by Avanscoperta. I definitely wanted to attend.
Then, taken from the day to day activities, I lost the sense of time, when mid-October, I received an email from Avanscoperta that reminded me of the upcoming course.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://www.andreavallotti.tech/en/2017/10/using-ef-cores-migration-with-docker-and-mysql/">
                <h3 class="media-heading">Using EF Core&#39;s migration with Docker and MySQL</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In this post I explain how to create a .NET Core 2.0 console application which reads, and writes, data from MySQL, and uses Entity Framework Core, and migrations, in order to persist data and manage the DB schema. Furthermore I will show how to use Docker to be able to develop the application independently by the chosen environment.
In order to highlight the needed steps, I split the post in this way:</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://www.andreavallotti.tech/en/2017/09/there-and-back-again/">
                <h3 class="media-heading">There and Back Again</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">For those who loves Tolkien, the title could seem uppish. After all, I traveled 7.600 km, much more than Bilbo and fellowship, I met people I could hardly understand, and I talked to a dragon&hellip; Ok, the latter is not true, but let me believe so ðŸ˜ƒ
Jokes aside, I spent the first six months of this year in Indianapolis, USA. In this period, I had the chance to appreciate how lively Indiana&rsquo;s tech community is.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://www.andreavallotti.tech/en/2017/08/console.writeline-hello-world/">
                <h3 class="media-heading">Console.WriteLine( &#34;Hello, World!&#34; );</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Every single experiment I did as a programmer began in this way: show Hello, World! on the monitor. Therefore I decided to start this new experiment (writing a blog) in the same way.
Who knows me well can tell that I never did my best in humanities, therefore &ldquo;writing a blog&rdquo; is not exactly in my style. However, I strongly believe that sharing experiences is essential in my job for two main reasons:</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://www.andreavallotti.tech/en/post/">
                <h3 class="media-heading">Posts</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         8 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://res.cloudinary.com/andreavallotti/image/upload/blog/images/cover-NGC4258-M106.jpg');"></div>
  


    
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.js"></script>
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>


<script src="http://www.andreavallotti.tech/js/script-wl33z0n6ocaypepiqrazthtivfrliqijej4rq8ek8gvrv1awftmgjuv8k4zc.min.js"></script>

<script>
$(document).ready(function() {
  hljs.registerLanguage("fsharp",function(e){var t={b:"<",e:">",c:[e.inherit(e.TM,{b:/'[a-zA-Z0-9_]+/})]};return{aliases:["fs"],k:"abstract and as assert base begin class default delegate do done downcast downto elif else end exception extern false finally for fun function global if in inherit inline interface internal lazy let match member module mutable namespace new null of open or override private public rec return select sig static struct then to true try type upcast use val void when where while with yield",i:/\/\*/,c:[{cN:"keyword",b:/\b(yield|return|let|do)!/},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},{cN:"string",b:'"""',e:'"""'},e.C("\\(\\*","\\*\\)"),{cN:"class",bK:"type",e:"\\(|=|$",eE:!0,c:[e.UTM,t]},{cN:"meta",b:"\\[<",e:">\\]",r:10},{cN:"symbol",b:"\\B('[A-Za-z])\\b",c:[e.BE]},e.CLCM,e.inherit(e.QSM,{i:null}),e.CNM]}});
  hljs.registerLanguage("yaml", function(e) { var b = "true false yes no null", a = "^[ \\-]*", r = "[a-zA-Z_][\\w\\-]*", t = { cN: "attr", v: [{ b: a + r + ":" }, { b: a + '"' + r + '":' }, { b: a + "'" + r + "':" }] }, c = { cN: "template-variable", v: [{ b: ", e: " }, { b: "%{", e: "}" }] }, l = { cN: "string", r: 0, v: [{ b: /'/, e: /'/ }, { b: /"/, e: /"/ }, { b: /\S+/ }], c: [e.BE, c] }; return { cI: !0, aliases: ["yml", "YAML", "yaml"], c: [t, { cN: "meta", b: "^---s*$", r: 10 }, { cN: "string", b: "[\\|>] *$", rE: !0, c: l.c, e: t.v[0].b }, { b: "<%[%=-]?", e: "[%-]?%>", sL: "ruby", eB: !0, eE: !0, r: 0 }, { cN: "type", b: "!!" + e.UIR }, { cN: "meta", b: "&" + e.UIR + "$" }, { cN: "meta", b: "\\*" + e.UIR + "$" }, { cN: "bullet", b: "^ *-", r: 0 }, e.HCM, { bK: b, k: { literal: b } }, e.CNM, l] } });
  hljs.registerLanguage("dockerfile", function(e) { return { aliases: ["docker"], cI: !0, k: "from maintainer expose env arg user onbuild stopsignal", c: [e.HCM, e.ASM, e.QSM, e.NM, { bK: "run cmd entrypoint volume add copy workdir label healthcheck shell", starts: { e: /[^\\]\n/, sL: "bash" } }], i: "</" } });
  hljs.registerLanguage("scala",function(e){var t={cN:"meta",b:"@[A-Za-z]+"},a={cN:"subst",v:[{b:"\\$[A-Za-z0-9_]+"},{b:"\\${",e:"}"}]},r={cN:"string",v:[{b:'"',e:'"',i:"\\n",c:[e.BE]},{b:'"""',e:'"""',r:10},{b:'[a-z]+"',e:'"',i:"\\n",c:[e.BE,a]},{cN:"string",b:'[a-z]+"""',e:'"""',c:[a],r:10}]},c={cN:"symbol",b:"'\\w[\\w\\d_]*(?!')"},i={cN:"type",b:"\\b[A-Z][A-Za-z0-9_]*",r:0},s={cN:"title",b:/[^0-9\n\t "'(),.`{}\[\]:;][^\n\t "'(),.`{}\[\]:;]+|[^0-9\n\t "'(),.`{}\[\]:;=]/,r:0},n={cN:"class",bK:"class object trait type",e:/[:={\[\n;]/,eE:!0,c:[{bK:"extends with",r:10},{b:/\[/,e:/\]/,eB:!0,eE:!0,r:0,c:[i]},{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,r:0,c:[i]},s]},l={cN:"function",bK:"def",e:/[:={\[(\n;]/,eE:!0,c:[s]};return{k:{literal:"true false null",keyword:"type yield lazy override def with val var sealed abstract private trait object if forSome for while throw finally protected extends import final return else break new catch super class case package default try this match continue throws implicit"},c:[e.CLCM,e.CBCM,r,c,i,l,n,e.CNM,t]}});
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight').each(function(i, block) {
    var code = "";
    var languageFilter = (block.classList && block.classList.length > 1) ? [].slice.apply(block.classList) : null;
    var autoDetected = hljs.highlightAuto(block.innerText, languageFilter);

    autoDetected.value.split(/\r\n|\r|\n/).forEach(function(line) {
      code += "<span class=\"line\">" + line + "</span><br>";
    });
    if (code.length > 0) {
      block.innerHTML = code;  
    }
  });
  $('pre > code').each(function(i, block) {
    $(this).addClass('codeblock');
    hljs.highlightBlock(block);
  });
});
</script>

  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'http:\/\/www.andreavallotti.tech\/en\/2017\/09\/there-and-back-again\/';
          
            this.page.identifier = '\/en\/2017\/09\/there-and-back-again\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'andreavallotti';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  




<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#000"
    },
    "button": {
      "background": "#f1d600"
    }
  },
  "content": {
    "message": "This website uses cookies to ensure you get the best experience on our website.",
    "dismiss": "Got it!",
    "link": "Learn more",
    "href": "/en/page/cookie"
  }
})});
</script>
    
  </body>
</html>

